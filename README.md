## 前言 ##
考虑到宿舍肯定有人会忘记带钥匙，上铺又懒得下床开门，所以开学临出门前就顺手收拾了一块esp8266和一个mg995舵机还有一把杜邦线（太匆忙了，忘记带舵机的配件还有螺丝刀了，又下单买了一个新的舵机还有螺丝刀 ::aru:crying:: ），军训了几天就因为疫情结束了，所以就有时间在宿舍敲代码了。

## 材料 ##
esp8266 x1

mg995舵机 x1

杜邦线 足够多足够长

数据线 x1

充电器 x1

固定用材（热熔胶、双面胶、胶带等等均可）

## 线路图 ##
![line.png][2]

D4连接舵机信号线（黄色）

VCC连接舵机VCC（红色）

GND连接舵机GND（黑色）

## 代码 ##
[lock.ino][1]

修改代码中wifi、ap账号密码信息（注意ap模式密码不能少于8位，否则会创建失败）

无需外网，esp8266网页控制，支持sta、ap模式接入、ota升级方便后期更新

## 成品 ##
![product.jpg][3]

舵机使用了双面胶加热熔胶固定在门上（第一次用热熔胶掉了，图上还有印记，第二次加了双面胶改成横装了 ::aru:speechless:: ），然后用杜邦线绑住拉锁舌的那个（叫啥来着）加上热熔胶固定在舵机的转盘配件上，因为电源在门的开门那边，所以使用了网线从门的上面绕到另外一边（注意需要质量好的5类或以上线材，否则会因为电流不够导致无法开门，这个坑遇到过，辣鸡线材 ::aru:frown:: ），电源方面使用了充电宝边充边放，这样子断电也不用担心开不了门。

## 食用方法（使用方法） ##
**通过自带ap连接开锁**

连接设置的wifi，输入192.168.4.1进入网页，点击ON即可开锁
![web.PNG][4]


**通过路由器连接开锁**

连接路由器wifi，输入esp8266的ip地址，点击ON即可开锁
![web.PNG][5]


**通过快捷指令开锁**

点击快捷指令或大喊“嘿，siri打开宿舍门”，即可开锁
![shortcut.jpg][6]


**通过api开锁**

访问`http://ip/LOCKON`，即可开锁，可应用于自动化、APP开发等

  [1]: https://raw.githubusercontent.com/Xiaobin2333/Dormitory_lock/main/lock.ino
  [2]: https://www.mrchung.cn/usr/uploads/2021/10/3762481167.png
  [3]: https://www.mrchung.cn/usr/uploads/2021/10/159784304.jpg
  [4]: https://www.mrchung.cn/usr/uploads/2021/10/2890835194.png
  [5]: https://www.mrchung.cn/usr/uploads/2021/10/2890835194.png
  [6]: https://www.mrchung.cn/usr/uploads/2021/10/790581652.jpg
